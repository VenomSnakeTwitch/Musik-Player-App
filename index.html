<!DOCTYPE html>
<html lang="de" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- PWA Essentials -->
    <meta name="theme-color" content="#9146ff">
    <meta name="background-color" content="#000033">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="apple-touch-icon" href="android-launchericon-192-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <title>VenomSnake Musikplayer</title>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap');

        :root {
            --bg-overlay: rgba(0,0,50,0.85);
            --text-main: #f0f0ff;
            --accent: #00ffff;
            --accent-dark: #9146ff;
        }

        [data-theme="light"] {
            --bg-overlay: rgba(245,245,255,0.88);
            --text-main: #1a1a40;
            --accent: #4169e1;
            --accent-dark: #6a0dad;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Orbitron', sans-serif;
            background: url("musicbackground.png") no-repeat center center fixed;
            background-size: cover;
            color: var(--text-main);
            text-align: center;
            overflow-y: auto;
            overflow-x: hidden;
        }

        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(6px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 24px;
            box-sizing: border-box;
            z-index: 1000;
        }

        /* ... dein restlicher CSS bleibt gleich â€“ nur die Media-Query hinzugefÃ¼gt ... */

        @media (max-width: 600px) {
            h1 { font-size: 2.2rem; }
            #overlay { padding-top: 80px; }
            #songControls, #controls { flex-direction: column; align-items: stretch; gap: 10px; }
            #progress { width: 90%; }
            #progressContainer { flex-direction: column; gap: 8px; max-width: 95%; }
            button, select, #downloadBtn { width: 100%; padding: 12px; font-size: 1.1rem; }
            #volumeContainer { flex-direction: row; justify-content: center; gap: 20px; }
            #volumeContainer input[type="range"] { width: 140px; height: 8px; writing-mode: horizontal-tb; -webkit-appearance: slider-horizontal; }
            #infoBox { flex-direction: column; height: auto; max-height: 50vh; }
        }
    </style>
</head>
<body>

<header>
    <div class="logo-container">
        <img src="DogVenomsnakeLogo.png" alt="VenomSnake Logo">
        <span>VENOM<span class="snake">SNÎ›KE</span></span>
    </div>
    <nav>
        <ul>
            <li><a href="index.html">Startseite</a></li>
            <li><a href="donation.html">Spenden</a></li>
            <li><a href="kontakt.html">Kontakt</a></li>
            <li><button id="visualizerBtn">ðŸŽµ Visualizer</button></li>
        </ul>
    </nav>
    <button id="themeBtn" style="padding:6px 12px; font-size:1.2rem; background:rgba(145,70,255,0.3); border:1px solid #9146ff; border-radius:6px; color:white; cursor:pointer;">
        ðŸŒ™
    </button>
</header>

<div id="overlay">
    <h1>VenomSnake Musikplayer</h1>
    <div id="infoText">Tracks erstellt mit Suno â€“ hÃ¶ren & downloaden</div>
    <h2 id="currentSong">â–¶ Kein Song ausgewÃ¤hlt</h2>
    <audio id="audioPlayer" crossorigin="anonymous"></audio>

    <!-- songControls, progressContainer, controls, infoBox â€“ wie bisher -->

    <!-- ... fÃ¼ge hier deinen bestehenden HTML-Inhalt fÃ¼r Controls und Info-Box ein ... -->
</div>

<!-- Visualizer Overlay â€“ wie bisher -->

<!-- Service Worker -->
<script>
if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
            .then(reg => console.log('SW registriert â†’ Scope:', reg.scope))
            .catch(err => console.error('SW Fehler:', err));
    });
}
</script>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// JavaScript â€“ gefixt & erweitert
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const BASE_URL = "https://raw.githubusercontent.com/VenomSnakeTwitch/VenomSnake_Twitch-Webseite/main/";
const songs = [
    "Snake Eater VenomSnake_Twitch Mix.mp3",
    "Ghost Town by VenomSnake_Twitch.mp3",
    // ... alle weiteren Dateinamen exakt so wie im Repo ...
    "Takin' On The Shagohod Remake.mp3"
];

let currentIndex = 0;
let radioMode = false;
let loopCurrent = false;

const audio = document.getElementById("audioPlayer");
const playPauseBtn = document.getElementById("playPauseBtn");
const songSelect = document.getElementById("songSelect");
const progress = document.getElementById("progress");
const timeLabel = document.getElementById("timeLabel");
const durationLabel = document.getElementById("durationLabel");
const volumeSlider = document.getElementById("volumeSlider");
const downloadBtn = document.getElementById("downloadBtn");
const loopBtn = document.getElementById("loopBtn");
const radioToggle = document.getElementById("radioToggle");
const visualizerBtn = document.getElementById("visualizerBtn");
const visualizerOverlay = document.getElementById("visualizerOverlay");
const themeBtn = document.getElementById("themeBtn");

// â”€â”€â”€ DARK MODE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toggleTheme() {
    const current = document.documentElement.getAttribute('data-theme') || 'dark';
    const newTheme = current === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', newTheme);
    localStorage.setItem('playerTheme', newTheme);
    themeBtn.textContent = newTheme === 'light' ? 'â˜€ï¸' : 'ðŸŒ™';
}

// Initialisierung Dark/Light Mode
window.addEventListener('load', () => {
    const saved = localStorage.getItem('playerTheme');
    if (saved) {
        document.documentElement.setAttribute('data-theme', saved);
        themeBtn.textContent = saved === 'light' ? 'â˜€ï¸' : 'ðŸŒ™';
    }
    themeBtn.onclick = toggleTheme;
});

// â”€â”€â”€ AUDIO PLAYER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
audio.crossOrigin = "anonymous";

function loadSong(index) {
    currentIndex = index;
    const fileName = songs[index];
    const safeName = encodeURIComponent(fileName);
    const url = BASE_URL + safeName;

    console.log("Lade Song:", url);

    audio.src = url;
    audio.load();

    songSelect.value = index;
    downloadBtn.href = url;
    downloadBtn.setAttribute("download", fileName);
    document.getElementById("currentSong").textContent = "â–¶ " + songSelect.options[index].text;

    // Automatisches Play versuchen (nach User-Interaction besser)
    audio.play().catch(e => {
        console.warn("Auto-Play blockiert â€“ warte auf Klick:", e.name, e.message);
    });
}

function togglePlay() {
    if (audio.paused || audio.ended) {
        audio.play().then(() => {
            playPauseBtn.textContent = "â¸ Pause";
        }).catch(e => {
            console.error("Play fehlgeschlagen:", e);
            alert("Wiedergabe konnte nicht gestartet werden.\nâ†’ PrÃ¼fe LautstÃ¤rke & Netzwerk");
        });
    } else {
        audio.pause();
        playPauseBtn.textContent = "â–¶ Play";
    }
}

// â”€â”€â”€ Weitere Funktionen (prevSong, nextSong, stopSong, etc.) â”€â”€
// ... fÃ¼ge hier den Rest deines bisherigen Codes ein ...

// Beispiel-Event-Listener (passe an deine IDs an)
playPauseBtn.onclick = togglePlay;
songSelect.onchange = () => {
    loadSong(parseInt(songSelect.value));
    togglePlay();
};

// Visualizer-Button
visualizerBtn.onclick = () => {
    console.log("Visualizer angefordert");
    visualizerOverlay.classList.add('active');
    // Starte Visualizer â€“ fÃ¼ge hier deine startVisualizer()-Logik ein
};

// Start
window.addEventListener('load', () => {
    loadSong(0);
    // ... deine restliche Initialisierung ...
});
</script>
</body>
</html>
